drop DATABASE if EXISTS book_shop_bykova_db;
CREATE DATABASE book_shop_bykova_db;

use book_shop_bykova_db;

CREATE TABLE publishers(
	id int PRIMARY KEY AUTO_INCREMENT,
    name nvarchar(50) not null,
    address nvarchar(150) not null,
    phone varchar(15) not null
);

CREATE TABLE categories(
	id int PRIMARY KEY AUTO_INCREMENT,
    name nvarchar(50) not null,
    id_parent_category int null,
    FOREIGN KEY(id_parent_category) REFERENCES categories(id)
);

CREATE TABLE books(
	id int PRIMARY KEY AUTO_INCREMENT,
    name nvarchar(50) not null,
    yearPublisher int not null,
    id_publisher int not null,
    id_category int not null,
    FOREIGN KEY(id_publisher) REFERENCES publishers(id),
    FOREIGN KEY(id_category) REFERENCES categories(id)
);


CREATE TABLE books_photos(
	id_book int not null,
    path varchar(50) not null,
    FOREIGN KEY(id_book) REFERENCES books(id)
);

CREATE TABLE `authors`(
    id int PRIMARY KEY AUTO_INCREMENT,
    name varchar(100) not null
);

CREATE TABLE books_authors(
	id_book int not null,
    id_author int not null,
    FOREIGN KEY(id_book) REFERENCES books(id),
    FOREIGN KEY(id_author) REFERENCES `authors`(id)
);

CREATE TABLE users(
	id int PRIMARY KEY AUTO_INCREMENT,
    displayName nvarchar(150) not null,
    email varchar(100) not null,
    `password` varchar(100) not null,
    role nvarchar(50) not null
);

INSERT INTO `users`(`displayName`, `email`, `password`, `role`) VALUES ('admin','admin@gmail.com','aa920e61bb9322e341c0d1a3c3668fa8','admin');